{% extends "base.html" %} 
{% from 'bootstrap5/form.html' import render_form %}
{% import "_macros.html" as macros %}

{% block title %}Flasky - Index{% endblock %} 
{% block page_content %}

<div class="time-reminder">
    <p>The local date and time is {{ moment(current_time).format('LLL') }}.</p>
    <p>That was {{ moment(current_time).fromNow(refresh=True) }}</p>
</div>

<div class="page-header">
    <!-- <h1>Hello, {% if not known %}Pleased to meet you!{% else %}Happy to see you again!{% endif %}!</h1> -->
    {% if current_user.is_authenticated %} Welcome, {{ current_user.username }}! {% else %} Hello, stranger! {% endif %}
</div>

<div>
    {% if current_user.can(Permission.WRITE) %} {{ render_form(form) }} {% endif %}
</div>

<div >
<ul class="nav nav-tabs" style="margin-top:3px;margin-bottom:0px;">
    
    {% if show_followed %}
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{{ url_for('main.show_all') }}">All</a>
    </li>
    <li class="nav-item">
        <a class="nav-link 
        active" aria-current="page" href="{{ url_for('main.show_followed') }}">Follow</a>
    </li>
    {% else %}
    <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="{{ url_for('main.show_all') }}">All</a>
    </li>
    <li class="nav-item">
        <a class="nav-link 
        " aria-current="page" href="{{ url_for('main.show_followed') }}">Follow</a>
    </li>
    {% endif %}

</ul>
</div>
{% include 'auth/_post.html' %}

<div class="pagination justify-content-center">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>

{% endblock %}

{% block scripts %}
     {{ super() }} <!-- 继承块的内容 -->
    {{ pagedown.include_pagedown() }}
    <script type="text/javascript">
        var obj = document.getElementById("flask-pagedown-body-preview");
        obj.classList.add('border')
        obj.classList.add('rounded')
        obj.style.marginTop = '3px'
        obj.style.minHeight = "10px"
        obj.setAttribute('placeholder', 'Preview')
        var obj = document.getElementById("flask-pagedown-body");
        obj.placeholder = 'Preview'
    </script>
{% endblock  %}







<!-- <div class="row row-cols-4 row-cols-md-1 g-4">
    {% for post in posts %}
    <div class="col">
        <div class="card mb-3" style="max-width: 640px">
            <div class="row" style="max-height: 30%">
                <div class="col-md-1">
                    <a href="{{ url_for('main.user', username=post.author.username) }}">
                        
                    </a>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">{{ post.author.name }}</h5>
                        <p class="card-text">{{ post.body }}</p>
                        <p class="card-text"><small class="text-muted">Last updated {{ moment(post.timestamp).fromNow() }}</small></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div> -->

<!-- <ul class="posts">
    {% for post in posts %}
    <li class="post">
        <div class="profile-thumbnail">
            <a href="{{ url_for('main.user', username=post.author.username) }}">
                <img class="img-rounded profile-thumbnail avatar" src="{{ avatar }}">
            </a>
        </div>
        <div class="post-date">
            {{ moment(post.timestamp).fromNow() }}
        </div>
        <div>
            <a href="{{ url_for('main.user', username=post.author.username) }}">
                {{ post.author.username }}
            </a>
        </div>
        <div class="post-body">
            {{ post.body }}
        </div>
    </li>
    {% endfor %}
</ul> -->
